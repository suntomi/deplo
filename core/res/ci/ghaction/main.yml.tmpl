# generated by deplo CLI https://github.com/suntomi/deplo don't edit by hand.
name: Deplo Workflow Runner

on: 
{entrypoint:>2}
  repository_dispatch:
    types: [{remote_job_dispatch_type}]

env:
  DEPLO_GHACTION_CI_ID: ${{{{ github.run_id }}}}-${{{{ github.run_attempt }}}}
  DEPLO_GHACTION_EVENT_DATA: ${{{{ toJson(github) }}}}
  DEPLO_OVERWRITE_VERBOSITY: ${{{{ github.event.client_payload.exec.verbosity }}}}
{secrets:>2}
jobs:
  deplo-main:
    name: Start CI ${{{{ github.event.client_payload.job_id }}}}
    runs-on: ubuntu-latest
    outputs:
{outputs:>6}
    steps:
{fetchcli:>6}
{kick_checkout:>6}
      - name: Boot deplo
        id: deplo-main
        run: deplo boot
      - name: Setup ssh session to debug
        if: ${{{{ failure() }}}}
        uses: mxschmitt/action-tmate@v3
        with:
          sudo: true
  deplo-halt:
    name: Cleanup CI
    if: ${{{{ !failure() && ({need_cleanups}) }}}}
    needs: [{needs}]
    runs-on: ubuntu-latest
{cleanup_envs:>4}
    steps:
{fetchcli:>6}
{fin_checkout:>6}
      - name: Halt deplo
        id: deplo-halt
        run: deplo halt
{debugger:>6}
{jobs:>2}